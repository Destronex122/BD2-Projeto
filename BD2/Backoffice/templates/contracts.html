{% extends 'base.html' %}

{% block title %}Contratos{% endblock %}

{% block content %}

{% load static %}

<style>
    #contractTable tbody tr:hover {
        background-color: #f1f1f1; /* Cor de fundo da linha ao passar o rato */
        cursor: pointer; /* Muda o cursor para indicar que a linha é clicável */
    }
</style>

<div class="editable-area newPadding">    
    <div style="display:flex; justify-content: space-between;">
        <h1>Contratos</h1>
    </div>
    <p>Selecione um contrato para visualizar o detalhe do mesmo.</p> 

    <!-- Filtros para a tabela -->
    <div class="filters" style="margin-bottom: 20px;">
        <form id="filterForm">
            <div style="display: flex; gap: 10px;">
                <div class="form-group">
                    <label for="filterNumber">Nº do contrato:</label>
                    <input type="text" id="filterNumber" class="form-control" placeholder="Ex: E123123">
                </div>
                <div class="form-group">
                    <label for="filterDate">Data de início do contrato:</label>
                    <input type="date" id="filterDate" class="form-control">
                </div>
                <div class="form-group" style="margin-top:24px; width:10%">
                    <button type="button" id="applyFilters" class="button" style="align-self: flex-end;">Aplicar</button>
                </div>
            </div>
        </form>
    </div>

    <!-- Tabela de entregas -->
    <table class="table table-bordered" id="contractTable">
        <thead>
            <tr>
                <th>Nº do contrato</th>
                <th>Cliente</th>
                <th>Data de início</th>
                <th>Data de fim</th>
                <th>Quantidade estimada</th>
                <th>Preço estimado</th>
            </tr>
        </thead>
        <tbody>
            {% for contrato in contratos %}
            <tr>
                <td>{{ contrato.clienteid }}</td>
                <td>{{ contrato.idpedido_item}}</td>
                <td>{{ contrato.datainicio}}</td>
                <td>{{ contrato.datafim}}</td>
                <td>{{ contrato.qtdeestimada}}</td>
                <td>{{ contrato.precoestimado}}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <script>

        document.getElementById('contractTable').addEventListener('click', function(event) {
            const targetRow = event.target.closest('tr');
            if (targetRow && !targetRow.closest('thead')) {
                window.location.href = `/backoffice/contractdetail/`; // Adjust with appropriate URL logic
            }
        });
    </script>

{% endblock %}